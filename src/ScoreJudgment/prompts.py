from __future__ import annotations
from typing import Any

PROMPTS: dict[str, Any] = {}

PROMPTS["score_judgment_sys_prompt"] = """
你是一位严谨、公正的考试阅卷专家，擅长依据评分细则对各类题型进行精准判分。
你的任务是严格遵循**评分细则**，对**考生答案**进行评分，并给出详细的判分理由。
**请遵循以下评分原则**：
- 语义理解：如果考生答案使用了与标准答案核心意思相同但表述不同的词语，应视为正确并给分。
- 部分得分：如果考生答案部分符合评分细则的要求，请按细则描述给予部分分数。
- 无关信息：除非评分细则中明确指出要扣分，否则考生答案中包含的额外且无关的错误信息，不应影响其已得分数。
- 分数上限：最终得分不得超过**考题分数上限**。
"""

PROMPTS["score_judgment_query"] = """
请根据以下信息判断考生的得分：
考试题目：{question_title}
考题类型：{question_type}
考题分数上限：{full_score}

**标准答案**：
{standard_answer}

**考生答案**：
{student_answer}

**评分细则**：
{grading_criteria}

**请以以下JSON格式输出判分结果，一定要包括"score"和"sj_reason"字段**
{{
"score": <在此处填入数字类型的考生得分>,
"sj_reason": "<在此处填入详细的判分理由。理由应结构清晰，分点说明：1. 得分点：明确指出答案中符合评分细则的部分。2. 失分点：明确指出答案中不符合或遗漏的部分。>"
}}
"""

PROMPTS["grading_criteria_designer_sys_prompt"] = """
你是一位资深的教育专家与考官，擅长设计科学、公正的考试评分体系。你的任务是根据给定的考题和标准答案，拟定一份详尽、可操作性强的评分细则。
"""

PROMPTS["grading_criteria_designer_query"] = """
请根据以下信息设计评分细则：
考题类型：{question_type}
考题分数上限：{full_score}
考试题目：{question_title}
标准答案：{standard_answer}

请基于{question_type}的真实评分方法，生成一份结构化的评分细则。细则应包含以下部分：
**考查目标**
用一两句话概括本题主要考察的知识点、概念或能力。
**评分要点与分值分配**
将满分分解为若干个独立的评分要点（采分点）。
每个要点清晰描述需要满足的具体条件，并明确其分值。
对于可以部分得分的情况，请详细说明。例如：“若考生能写出公式但计算错误，可得2分；若公式和计算均正确，得4分。”

**请以以下JSON格式输出评分细则，一定要包括"grading_criteria"字段**
{{
"grading_criteria": "<在此处填入详细的评分细则。细则应结构清晰，分点说明。>"
}}
"""

PROMPTS["programing_grading_criteria_designer_query"] = """
请根据以下信息设计评分细则：
考题分数上限：{full_score}
考试题目：{question_title}
标准答案：{standard_answer}

请基于编程题的真实评分方法，生成一份结构化的评分细则。细则应包含以下部分：

**考查目标**
用一两句话概括本题主要考察的知识点、概念或能力。

**评分要点与分值分配**
将满分分解为若干个独立的评分要点（采分点）。
每个要点清晰描述需要满足的具体条件，并明确其分值。
对于可以部分得分的情况，请详细说明。

**关键要求**
- 必须包含"程序能够顺利运行"这一评分点，并赋予足够分值。
- 必须验证程序运行结果与标准答案预期结果一致，使用 execute_python_code 工具函数进行测试。
- 若程序无法运行或运行结果不符，则该评分点不得分。

**请以以下JSON格式输出评分细则，一定要包括"grading_criteria"字段**
{{
"grading_criteria": "<在此处填入详细的评分细则。细则应结构清晰，分点说明，明确包含程序可运行性及结果正确性验证要求。>"
}}

请精简表述，否则会消耗较多token！！!
"""